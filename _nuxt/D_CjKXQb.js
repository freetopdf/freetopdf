import{g as E,a as P}from"./53msrA3t.js";import{G as U,g as f,f as x,w as o,r as t,o as p,b as n,m as y,j as d,a as l,t as g,d as m,c as R}from"./CVECWm9d.js";const L={class:"d-flex align-center"},j={class:"flex-grow-1"},B={class:"text-body-2"},N={key:0,class:"text-body-2 text-medium-emphasis mb-4"},V={class:"mt-4"},q={__name:"download-pdf",setup($){const w=U(),u=f(w.query.pdf_filename),i=f(w.query.original_filename),r=f(null),D=async()=>{if(!u.value){r.value="PDF 파일 정보를 찾을 수 없습니다.";return}try{let s="converted.pdf";i.value&&(s=`${i.value.replace(/\.(doc|docx)$/i,"")}.pdf`);const e=await E(P.downloadPdf+`/${u.value}`);console.log("🔍 PDF Download URL:",e);const c=await fetch(e);if(!c.ok)throw new Error("Download failed.");const v=await c.blob(),_=window.URL.createObjectURL(v),a=document.createElement("a");a.href=_,a.download=s,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(_),document.body.removeChild(a)}catch(s){console.error("Download error:",s),r.value=s.message||"An error occurred during download."}};return(s,e)=>{const c=t("v-icon"),v=t("v-alert"),_=t("v-card-title"),a=t("v-btn"),b=t("v-card-text"),k=t("v-card"),F=t("v-col"),C=t("v-row"),h=t("v-container");return p(),x(h,{class:"py-12"},{default:o(()=>[n(C,{justify:"center"},{default:o(()=>[n(F,{cols:"12",md:"8",lg:"6"},{default:o(()=>[n(k,{class:"pa-6"},{default:o(()=>[d(r)?(p(),x(v,{key:0,type:"error",class:"mb-6",icon:"mdi-alert"},{default:o(()=>[l("div",L,[l("div",j,[e[1]||(e[1]=l("div",{class:"text-subtitle-1 font-weight-bold mb-1"},"Error",-1)),l("div",B,g(d(r)),1)]),n(c,{class:"close-icon",icon:"mdi-close",size:"20",onClick:e[0]||(e[0]=z=>r.value=null)})])]),_:1})):y("",!0),n(_,{class:"text-h4 text-center mb-6"},{default:o(()=>e[2]||(e[2]=[m(" PDF Download ")])),_:1,__:[2]}),n(b,{class:"text-center"},{default:o(()=>[n(c,{size:"64",color:"success",class:"mb-4"},{default:o(()=>e[3]||(e[3]=[m(" mdi-check-circle ")])),_:1,__:[3]}),e[6]||(e[6]=l("div",{class:"text-h6 mb-4"}," Your PDF is ready! ",-1)),d(i)?(p(),R("div",N," Original file: "+g(d(i)),1)):y("",!0),n(a,{color:"primary",size:"large",onClick:D,class:"mb-4",disabled:!d(u)},{default:o(()=>e[4]||(e[4]=[m(" Download PDF ")])),_:1,__:[4]},8,["disabled"]),l("div",V,[n(a,{variant:"text",color:"primary",to:"/"},{default:o(()=>e[5]||(e[5]=[m(" Convert Another File ")])),_:1,__:[5]})])]),_:1,__:[6]})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{q as default};
